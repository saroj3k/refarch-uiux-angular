{"version":3,"file":"ngx-joyride.umd.js","sources":["../../src/models/joyride-step.class.ts","../../src/services/joyride-options.service.ts","../../src/services/joyride-steps-container.service.ts","../../src/models/joyride-error.class.ts","../../src/services/dom.service.ts","../../src/directives/joyride.directive.ts","../../src/services/document.service.ts","../../src/services/joyride-backdrop.service.ts","../../src/services/event-listener.service.ts","../../src/services/logger.service.ts","../../src/components/step/joyride-step.component.ts","../../src/services/step-drawer.service.ts","../../src/services/joyride-step.service.ts","../../../../node_modules/tslib/tslib.es6.js","../../../../node_modules/rxjs/_esm5/internal/util/errorObject.js","../../../../node_modules/rxjs/_esm5/internal/util/tryCatch.js","../../../../node_modules/rxjs/_esm5/internal/util/isFunction.js","../../../../node_modules/rxjs/_esm5/internal/config.js","../../../../node_modules/rxjs/_esm5/internal/util/hostReportError.js","../../../../node_modules/rxjs/_esm5/internal/Observer.js","../../../../node_modules/rxjs/_esm5/internal/util/isArray.js","../../../../node_modules/rxjs/_esm5/internal/util/isObject.js","../../../../node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","../../../../node_modules/rxjs/_esm5/internal/Subscription.js","../../../../node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","../../../../node_modules/rxjs/_esm5/internal/Subscriber.js","../../../../node_modules/rxjs/_esm5/internal/symbol/observable.js","../../../../node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js","../../../../node_modules/rxjs/_esm5/internal/util/EmptyError.js","../../../../node_modules/rxjs/_esm5/internal/operators/finalize.js","../../../../node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","../../../../node_modules/rxjs/_esm5/internal/util/TimeoutError.js","../../../../node_modules/rxjs/_esm5/internal/operators/windowToggle.js","../../src/models/joyride-step-info.class.ts","../../src/services/joyride.service.ts","../../src/components/button/button.component.ts","../../src/components/close-button/close-button.component.ts","../../src/components/arrow/arrow.component.ts","../../src/joyride.module.ts"],"sourcesContent":["import { ViewContainerRef, TemplateRef, EventEmitter } from \"@angular/core\";\r\nimport { JoyrideStepComponent } from \"../components/step/joyride-step.component\";\r\n\r\nexport class JoyrideStep {\r\n    name: string;\r\n    route: string;\r\n    position: string;\r\n    title: string;\r\n    text: string;\r\n    stepContent: TemplateRef<any>;\r\n    stepContentParams: Object;\r\n    nextClicked: EventEmitter<any>;\r\n    prevCliked: EventEmitter<any>;\r\n    tourDone: EventEmitter<any>;\r\n    transformCssStyle: string;\r\n    isElementOrAncestorFixed: boolean;\r\n    targetViewContainer: ViewContainerRef;\r\n    stepInstance: JoyrideStepComponent;\r\n}","import { Injectable } from \"@angular/core\";\r\nimport { JoyrideOptions } from \"../models/joyride-options.class\";\r\n\r\nexport const DEFAULT_THEME_COLOR = \"#3b5560\";\r\nexport const THEME_COLOR = DEFAULT_THEME_COLOR;\r\nexport const STEP_DEFAULT_POSITION = \"bottom\";\r\n\r\n@Injectable()\r\nexport class JoyrideOptionsService {\r\n\r\n    private themeColor: string = THEME_COLOR;\r\n    private stepDefaultPosition: string = STEP_DEFAULT_POSITION;\r\n    private logsEnabled: boolean = true;\r\n    private showCounter: boolean = true;\r\n    private showPrevButton: boolean = true;\r\n    private stepsOrder: string[] = [];\r\n    setOptions(options: JoyrideOptions) {\r\n        this.stepsOrder = options.steps;\r\n        this.stepDefaultPosition = options.stepDefaultPosition ? options.stepDefaultPosition : this.stepDefaultPosition;\r\n        this.logsEnabled = typeof options.logsEnabled !== 'undefined' ? options.logsEnabled : this.logsEnabled;\r\n        this.showCounter = typeof options.showCounter !== 'undefined' ? options.showCounter : this.showCounter;\r\n        this.showPrevButton = typeof options.showPrevButton !== 'undefined' ? options.showPrevButton : this.showPrevButton;\r\n        this.themeColor = options.themeColor ? options.themeColor : this.themeColor;\r\n    }\r\n\r\n    getBackdropColor() {\r\n        return this.hexToRgb(this.themeColor);\r\n    }\r\n\r\n    getThemeColor() {\r\n        return this.themeColor;\r\n    }\r\n\r\n    getStepDefaultPosition() {\r\n        return this.stepDefaultPosition;\r\n    }\r\n\r\n    getStepsOrder() {\r\n        return this.stepsOrder;\r\n    }\r\n\r\n    areLogsEnabled() {\r\n        return this.logsEnabled;\r\n    }\r\n\r\n    isCounterVisible() {\r\n        return this.showCounter;\r\n    }\r\n\r\n    isPrevButtonVisible() {\r\n        return this.showPrevButton;\r\n    }\r\n\r\n    private hexToRgb(hex: any): string {\r\n        var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n        hex = hex.replace(shorthandRegex, (m: any, r: any, g: any, b: any) => {\r\n            return r + r + g + g + b + b;\r\n        });\r\n\r\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ?\r\n            `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : null;\r\n    }\r\n}","import { Injectable } from \"@angular/core\";\r\nimport { JoyrideStep } from \"../models/joyride-step.class\";\r\nimport { Subject } from \"rxjs\";\r\nimport { JoyrideOptionsService } from \"./joyride-options.service\";\r\n\r\nconst ROUTE_SEPARATOR = '@';\r\n\r\n@Injectable()\r\nexport class JoyrideStepsContainerService {\r\n    private steps: JoyrideStep[];\r\n    private stepsOriginal: JoyrideStep[];\r\n    stepHasBeenModified: Subject<JoyrideStep> = new Subject<JoyrideStep>();\r\n\r\n    constructor(\r\n        private readonly stepOptions: JoyrideOptionsService\r\n    ) {\r\n        this.stepsOriginal = [];\r\n        this.steps = [];\r\n    }\r\n\r\n    get(index: number): JoyrideStep {\r\n        return this.steps[index];\r\n    }\r\n\r\n    getStepRoute(index: number) {\r\n        let stepsOrder = this.stepOptions.getStepsOrder();\r\n        let stepID = stepsOrder[index];\r\n        let stepRoute = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[1] : \"\";\r\n        return stepRoute;\r\n    }\r\n\r\n    getStepPosition(step: JoyrideStep): number {\r\n        return this.getStepIndex(step) + 1;\r\n    }\r\n\r\n    addStep(stepToAdd: JoyrideStep) {\r\n        let stepExist = this.stepsOriginal.filter(step => step.name === stepToAdd.name).length > 0;\r\n        if (!stepExist) this.stepsOriginal.push(stepToAdd);\r\n        else {\r\n            let stepIndexToReplace = this.stepsOriginal.findIndex(step => step.name === stepToAdd.name);\r\n            this.stepsOriginal[stepIndexToReplace] = stepToAdd;\r\n        }\r\n    }\r\n\r\n    getNumberOfSteps() {\r\n        let stepsOrder = this.stepOptions.getStepsOrder();\r\n        return stepsOrder.length;\r\n    }\r\n\r\n    setPosition(step: JoyrideStep, position: string) {\r\n        let index = this.getStepIndex(step);\r\n        this.steps[index].position = position;\r\n        this.stepHasBeenModified.next(this.steps[index]);\r\n    }\r\n\r\n    initSteps() {\r\n        this.steps = [];\r\n        this.stepsOriginal.forEach((step) => this.steps.push({ ...step }));\r\n        this.sortSteps();\r\n    }\r\n\r\n    private sortSteps() {\r\n        let orderedSteps: JoyrideStep[] = [];\r\n        let stepsOrder = this.stepOptions.getStepsOrder();\r\n\r\n        stepsOrder.forEach((stepID) => {\r\n            let step = this.steps.find((step) => step.name === this.getStepName(stepID));\r\n            if (step) orderedSteps.push(step);\r\n        });\r\n\r\n        this.steps = [...orderedSteps];\r\n    }\r\n\r\n    private getStepIndex(step: JoyrideStep) {\r\n        return this.steps.findIndex((s) => step.name + step.route === s.name + s.route);\r\n    }\r\n\r\n    private getStepName(stepID: string): string {\r\n        let stepName = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[0] : stepID;\r\n        return stepName;\r\n    }\r\n}","export class JoyrideError extends Error {\r\n}","import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\n@Injectable()\r\nexport class DomRefService {\r\n\r\n    private fakeDocument: Document = <Document>{ body: {}, documentElement: {} };\r\n    private fakeWindow: Window = <Window>{ document: this.fakeDocument};\r\n    constructor(\r\n        @Inject(PLATFORM_ID) private platformId: Object\r\n    ) { }\r\n    getNativeWindow(): Window {\r\n        if (isPlatformBrowser(this.platformId)) return window;\r\n        else return this.fakeWindow;\r\n    }\r\n\r\n    getNativeDocument() {\r\n        if (isPlatformBrowser(this.platformId)) return document;\r\n        else return this.fakeDocument;\r\n    }\r\n}","import { Directive, ElementRef, AfterViewInit, Input, ViewContainerRef, ViewChild, Renderer2, TemplateRef, Output, EventEmitter, Inject, PLATFORM_ID } from '@angular/core';\r\nimport { JoyrideStep } from \"../models/joyride-step.class\";\r\nimport { JoyrideStepsContainerService } from \"../services/joyride-steps-container.service\";\r\nimport { JoyrideError } from \"../models/joyride-error.class\";\r\nimport { Router } from '@angular/router';\r\nimport { DomRefService } from '../services/dom.service';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\nexport const NO_POSITION = \"NO_POSITION\";\r\n\r\n@Directive({\r\n    selector: 'joyrideStep, [joyrideStep]'\r\n})\r\nexport class JoyrideDirective implements AfterViewInit {\r\n\r\n    @Input(\"joyrideStep\")\r\n    name: string;\r\n\r\n    @Input()\r\n    nextStep?: string;\r\n\r\n    @Input()\r\n    title?: string;\r\n\r\n    @Input()\r\n    text?: string;\r\n\r\n    @Input()\r\n    stepPosition?: string = NO_POSITION;\r\n\r\n    @Input()\r\n    stepContent?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    stepContentParams?: Object;\r\n\r\n    @Output()\r\n    prev?: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output()\r\n    next?: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output()\r\n    done?: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    private windowRef: Window;\r\n\r\n\r\n    constructor(\r\n        private readonly joyrideStepsContainer: JoyrideStepsContainerService,\r\n        private readonly viewContainerRef: ViewContainerRef,\r\n        private readonly domService: DomRefService,\r\n        private readonly router: Router,\r\n        @Inject(PLATFORM_ID) private platformId: Object\r\n\r\n    ) {\r\n        this.windowRef = this.domService.getNativeWindow()\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (!isPlatformBrowser(this.platformId)) return;\r\n        let step = new JoyrideStep();\r\n        step.position = this.stepPosition;\r\n        step.targetViewContainer = this.viewContainerRef;\r\n        step.text = this.text;\r\n        step.title = this.title;\r\n        step.stepContent = this.stepContent;\r\n        step.stepContentParams = this.stepContentParams;\r\n        step.nextClicked = this.next;\r\n        step.prevCliked = this.prev;\r\n        step.tourDone = this.done;\r\n        if (!this.name) throw new JoyrideError(\"All the steps should have the 'joyrideStep' property set with a custom name.\");\r\n        step.name = this.name;\r\n        step.route = this.router.url.substr(0, 1) === '/' ? this.router.url.substr(1) : this.router.url;\r\n        step.transformCssStyle = this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform;\r\n        step.isElementOrAncestorFixed = this.isElementFixed(this.viewContainerRef.element) || this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement);\r\n\r\n        this.joyrideStepsContainer.addStep(step);\r\n    }\r\n\r\n    private isElementFixed(element: ElementRef) {\r\n        return this.windowRef.getComputedStyle(element.nativeElement).position === 'fixed';\r\n    }\r\n\r\n    private isAncestorsFixed(nativeElement: any): boolean {\r\n        if (!nativeElement.parentElement) return false;\r\n        let isElementFixed = this.windowRef.getComputedStyle(nativeElement.parentElement).position === 'fixed';\r\n        if (nativeElement.nodeName === 'BODY') {\r\n            return isElementFixed;\r\n        }\r\n        if (isElementFixed) return true;\r\n        else return this.isAncestorsFixed(nativeElement.parentElement);\r\n    }\r\n\r\n}","import { Injectable, ElementRef } from \"@angular/core\";\r\nimport { DomRefService } from \"./dom.service\";\r\n\r\n@Injectable()\r\nexport class DocumentService {\r\n    private documentHeight: number;\r\n\r\n    constructor(private readonly DOMService: DomRefService) { \r\n        this.setDocumentHeight();\r\n    }\r\n\r\n    \r\n    getElementFixedTop(elementRef: ElementRef) {\r\n        return elementRef.nativeElement.getBoundingClientRect().top;\r\n    }\r\n\r\n    getElementFixedLeft(elementRef: ElementRef) {\r\n        return elementRef.nativeElement.getBoundingClientRect().left;\r\n    }\r\n\r\n    getElementAbsoluteTop(elementRef: ElementRef) {\r\n        var scrollOffsets = this.getScrollOffsets();\r\n        return elementRef.nativeElement.getBoundingClientRect().top + scrollOffsets.y;\r\n    }\r\n\r\n    getElementAbsoluteLeft(elementRef: ElementRef) {\r\n        var scrollOffsets = this.getScrollOffsets();\r\n        return elementRef.nativeElement.getBoundingClientRect().left + scrollOffsets.x;\r\n    }\r\n\r\n    getElementAbsoluteRight(elementRef: ElementRef) {\r\n        var scrollOffsets = this.getScrollOffsets();\r\n        return elementRef.nativeElement.getBoundingClientRect().right;\r\n    }\r\n\r\n    setDocumentHeight(){\r\n        this.documentHeight = this.calculateDocumentHeight();\r\n    }\r\n\r\n    getDocumentHeight(){\r\n        return this.documentHeight;\r\n    }\r\n\r\n    private calculateDocumentHeight() {\r\n        var doc = this.DOMService.getNativeDocument();\r\n        return Math.max(\r\n            doc.body.scrollHeight, doc.documentElement.scrollHeight,\r\n            doc.body.offsetHeight, doc.documentElement.offsetHeight,\r\n            doc.body.clientHeight, doc.documentElement.clientHeight\r\n        );\r\n    }\r\n\r\n    private getScrollOffsets() {\r\n        var w = this.DOMService.getNativeWindow();\r\n\r\n        // This works for all browsers except IE versions 8 and before\r\n        if (w.pageXOffset != null) return { x: w.pageXOffset, y: w.pageYOffset };\r\n        // For IE (or any browser) in Standards mode\r\n        var d = w.document;\r\n        if (document.compatMode == \"CSS1Compat\")\r\n            return { x: d.documentElement.scrollLeft, y: d.documentElement.scrollTop };\r\n        // For browsers in Quirks mode\r\n        return { x: d.body.scrollLeft, y: d.body.scrollTop };\r\n    }\r\n}","import { Injectable, Renderer2, ElementRef, RendererFactory2, ViewContainerRef, RendererType2 } from \"@angular/core\";\r\nimport { DocumentService } from \"./document.service\";\r\nimport { Scroll } from \"./event-listener.service\";\r\nimport { JoyrideOptionsService } from \"./joyride-options.service\";\r\nimport { JoyrideStep } from \"../models/joyride-step.class\";\r\n\r\n@Injectable()\r\nexport class JoyrideBackdropService {\r\n\r\n    private renderer: Renderer2;\r\n    private backdropContainer: any;\r\n    private backdropContent: any;\r\n    private backdropTop: any;\r\n    private backdropBottom: any;\r\n    private backdropMiddleContainer: any;\r\n    private backdropMiddleContent: any;\r\n    private leftBackdrop: any;\r\n    private targetBackdrop: any;\r\n    private rightBackdrop: any;\r\n    private elementRef: ViewContainerRef;\r\n    private targetAbsoluteTop: number;\r\n    private targetAbsoluteLeft: number;\r\n    private lastXScroll: number = 0;\r\n    private lastYScroll: number = 0;\r\n\r\n    constructor(\r\n        private readonly documentService: DocumentService,\r\n        private readonly optionsService: JoyrideOptionsService,\r\n        private readonly rendererFactory: RendererFactory2\r\n    ) {\r\n         this.setRenderer()\r\n    }\r\n\r\n    private setRenderer() {\r\n        this.renderer = this.rendererFactory.createRenderer(null, null);\r\n    }\r\n\r\n    show(step: JoyrideStep) {\r\n\r\n        this.elementRef = step.targetViewContainer;\r\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\r\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\r\n\r\n        this.backdropContainer = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropContainer, \"backdrop-container\");\r\n        this.renderer.setStyle(this.backdropContainer, \"position\", \"fixed\");\r\n        this.renderer.setStyle(this.backdropContainer, \"top\", \"0px\");\r\n        this.renderer.setStyle(this.backdropContainer, \"left\", \"0px\");\r\n        this.renderer.setStyle(this.backdropContainer, \"width\", \"100%\");\r\n        this.renderer.setStyle(this.backdropContainer, \"height\", \"100%\");\r\n        this.renderer.setStyle(this.backdropContainer, \"z-index\", \"1000\");\r\n        this.renderer.appendChild(document.body, this.backdropContainer);\r\n\r\n        this.backdropContent = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropContent, \"backdrop-content\");\r\n        this.renderer.setStyle(this.backdropContent, \"position\", \"relative\");\r\n        this.renderer.setStyle(this.backdropContent, \"height\", \"100%\");\r\n        this.renderer.setStyle(this.backdropContent, \"display\", \"flex\");\r\n        this.renderer.setStyle(this.backdropContent, \"flex-direction\", \"column\");\r\n        this.renderer.appendChild(this.backdropContainer, this.backdropContent);\r\n\r\n        this.backdropTop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropTop, \"joyride-backdrop\");\r\n        this.renderer.addClass(this.backdropTop, \"backdrop-top\");\r\n        this.renderer.setStyle(this.backdropTop, \"width\", \"100%\");\r\n        this.renderer.setStyle(this.backdropTop, \"height\", this.targetAbsoluteTop - this.lastYScroll + 'px');\r\n        this.renderer.setStyle(this.backdropTop, \"flex-shrink\", \"0\");\r\n        this.renderer.setStyle(this.backdropTop, \"background-color\", `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropContent, this.backdropTop);\r\n\r\n        this.backdropMiddleContainer = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropMiddleContainer, \"backdrop-middle-container\");\r\n        this.renderer.setStyle(this.backdropMiddleContainer, \"height\", this.elementRef.element.nativeElement.offsetHeight + 'px');\r\n        this.renderer.setStyle(this.backdropMiddleContainer, \"width\", \"100%\");\r\n        this.renderer.setStyle(this.backdropMiddleContainer, \"flex-shrink\", \"0\");\r\n        this.renderer.appendChild(this.backdropContent, this.backdropMiddleContainer);\r\n\r\n        this.backdropMiddleContent = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropMiddleContent, \"backdrop-middle-content\");\r\n        this.renderer.setStyle(this.backdropMiddleContent, \"display\", \"flex\");\r\n        this.renderer.setStyle(this.backdropMiddleContent, \"width\", \"100%\");\r\n        this.renderer.setStyle(this.backdropMiddleContent, \"height\", \"100%\");\r\n        this.renderer.appendChild(this.backdropMiddleContainer, this.backdropMiddleContent);\r\n\r\n        this.leftBackdrop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.leftBackdrop, \"joyride-backdrop\");\r\n        this.renderer.addClass(this.leftBackdrop, \"backdrop-left\");\r\n        this.renderer.setStyle(this.leftBackdrop, \"flex-shrink\", \"0\");\r\n        this.renderer.setStyle(this.leftBackdrop, \"width\", this.targetAbsoluteLeft - this.lastXScroll + \"px\");\r\n        this.renderer.setStyle(this.leftBackdrop, \"background-color\", `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropMiddleContent, this.leftBackdrop);\r\n\r\n        this.targetBackdrop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.targetBackdrop, \"backdrop-target\");\r\n        this.renderer.setStyle(this.targetBackdrop, \"flex-shrink\", \"0\");\r\n        this.renderer.setStyle(this.targetBackdrop, \"width\", this.elementRef.element.nativeElement.offsetWidth + 'px');\r\n        this.renderer.appendChild(this.backdropMiddleContent, this.targetBackdrop);\r\n\r\n        this.rightBackdrop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.rightBackdrop, \"joyride-backdrop\");\r\n        this.renderer.addClass(this.rightBackdrop, \"backdrop-right\");\r\n        this.renderer.setStyle(this.rightBackdrop, \"width\", \"100%\");\r\n        this.renderer.setStyle(this.rightBackdrop, \"background-color\", `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropMiddleContent, this.rightBackdrop);\r\n\r\n        this.backdropBottom = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropBottom, \"joyride-backdrop\");\r\n        this.renderer.addClass(this.backdropBottom, \"backdrop-bottom\");\r\n        this.renderer.setStyle(this.backdropBottom, \"width\", \"100%\");\r\n        this.renderer.setStyle(this.backdropBottom, \"height\", \"100%\");\r\n        this.renderer.setStyle(this.backdropBottom, \"background-color\", `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropContent, this.backdropBottom);\r\n\r\n    }\r\n\r\n    hide() {\r\n        this.removeBackdrop();\r\n        this.elementRef = undefined;\r\n    }\r\n\r\n    redrawTarget(step: JoyrideStep) {\r\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\r\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\r\n        this.handleVerticalScroll(step);\r\n        this.handleHorizontalScroll(step);\r\n    }\r\n\r\n    private getTargetTotalTop(step: JoyrideStep) {\r\n        let targetVC = step.targetViewContainer;\r\n        return step.isElementOrAncestorFixed ?\r\n            this.documentService.getElementFixedTop(targetVC.element)\r\n            : this.documentService.getElementAbsoluteTop(targetVC.element)\r\n    }\r\n\r\n    private getTargetTotalLeft(step: JoyrideStep) {\r\n        let targetVC = step.targetViewContainer;\r\n\r\n        return step.isElementOrAncestorFixed ?\r\n            this.documentService.getElementFixedLeft(targetVC.element)\r\n            : this.documentService.getElementAbsoluteLeft(targetVC.element)\r\n    }\r\n    redraw(step: JoyrideStep, scroll: Scroll) {\r\n        if (this.lastYScroll !== scroll.scrollY) {\r\n            this.lastYScroll = scroll.scrollY;\r\n            if (this.elementRef) {\r\n                this.handleVerticalScroll(step);\r\n            }\r\n\r\n        }\r\n        if (this.lastXScroll !== scroll.scrollX) {\r\n            this.lastXScroll = scroll.scrollX;\r\n            if (this.elementRef) {\r\n                this.handleHorizontalScroll(step);\r\n            }\r\n        }\r\n    }\r\n\r\n    private handleHorizontalScroll(step: JoyrideStep) {\r\n        let newBackdropLeftWidth = step.isElementOrAncestorFixed ?\r\n            this.targetAbsoluteLeft :\r\n            this.targetAbsoluteLeft - this.lastXScroll;\r\n\r\n        if (newBackdropLeftWidth >= 0) {\r\n            this.renderer.setStyle(this.leftBackdrop, \"width\", newBackdropLeftWidth + 'px');\r\n            this.renderer.setStyle(this.targetBackdrop, \"width\", this.elementRef.element.nativeElement.offsetWidth + 'px')\r\n        }\r\n        else {\r\n            this.handleTargetPartialWidth(newBackdropLeftWidth);\r\n        }\r\n    }\r\n\r\n    private handleTargetPartialWidth(newBackdropLeftWidth: number) {\r\n        this.renderer.setStyle(this.leftBackdrop, \"width\", 0 + 'px');\r\n        let visibleTargetWidth = this.elementRef.element.nativeElement.offsetWidth + newBackdropLeftWidth;\r\n        if (visibleTargetWidth >= 0) {\r\n            this.renderer.setStyle(this.targetBackdrop, \"width\", visibleTargetWidth + 'px');\r\n\r\n        } else {\r\n            this.renderer.setStyle(this.targetBackdrop, \"width\", 0 + 'px');\r\n        }\r\n    }\r\n\r\n    private handleVerticalScroll(step: JoyrideStep) {\r\n        let newBackdropTopHeight = step.isElementOrAncestorFixed ?\r\n            this.targetAbsoluteTop :\r\n            this.targetAbsoluteTop - this.lastYScroll;\r\n\r\n        if (newBackdropTopHeight >= 0) {\r\n            this.renderer.setStyle(this.backdropTop, \"height\", newBackdropTopHeight + 'px');\r\n            this.renderer.setStyle(this.backdropMiddleContainer, \"height\", this.elementRef.element.nativeElement.offsetHeight + 'px')\r\n        }\r\n        else {\r\n            this.handleTargetPartialHeight(newBackdropTopHeight);\r\n        }\r\n    }\r\n\r\n    private handleTargetPartialHeight(newBackdropTopHeight: number) {\r\n        this.renderer.setStyle(this.backdropTop, \"height\", 0 + 'px');\r\n        let visibleTargetHeight = this.elementRef.element.nativeElement.offsetHeight + newBackdropTopHeight;\r\n        if (visibleTargetHeight >= 0) {\r\n            this.renderer.setStyle(this.backdropMiddleContainer, \"height\", visibleTargetHeight + 'px');\r\n\r\n        } else {\r\n            this.renderer.setStyle(this.backdropMiddleContainer, \"height\", 0 + 'px');\r\n        }\r\n    }\r\n\r\n    private removeBackdrop() {\r\n        this.renderer.removeChild(document.body, this.backdropContainer);\r\n    }\r\n}","import { Injectable, Renderer2, RendererFactory2 } from \"@angular/core\";\r\nimport { Subject } from \"rxjs\";\r\nimport { DomRefService } from \"./dom.service\";\r\n\r\nexport class Scroll {\r\n    scrollX: number;\r\n    scrollY: number;\r\n}\r\n\r\n@Injectable()\r\nexport class EventListenerService {\r\n\r\n    private renderer: Renderer2;\r\n    private scrollUnlisten: any;\r\n    private resizeUnlisten: any;\r\n\r\n    scrollEvent: Subject<Scroll> = new Subject<Scroll>();\r\n    resizeEvent: Subject<number> = new Subject<number>();\r\n\r\n    constructor(\r\n        private readonly rendererFactory: RendererFactory2,\r\n        private readonly DOMService: DomRefService\r\n    ) {\r\n        this.renderer = rendererFactory.createRenderer(null, null);\r\n    }\r\n\r\n    startListeningScrollEvents() {\r\n        this.scrollUnlisten = this.renderer.listen('document', 'scroll', (evt) => {\r\n            this.scrollEvent.next({ scrollX: this.DOMService.getNativeWindow().pageXOffset, scrollY: this.DOMService.getNativeWindow().pageYOffset });\r\n        })\r\n    }\r\n\r\n    startListeningResizeEvents() {\r\n        this.resizeUnlisten = this.renderer.listen('window', 'resize', (evt) => {\r\n            this.resizeEvent.next(null);\r\n        })\r\n    }\r\n\r\n    stopListeningScrollEvents() {\r\n        this.scrollUnlisten();\r\n    }\r\n\r\n    stopListeningResizeEvents() {\r\n        this.resizeUnlisten();\r\n    }\r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\n\r\nconst JOYRIDE = 'ngx-joyride:::';\r\n\r\n@Injectable()\r\nexport class LoggerService {\r\n\r\n    constructor(private readonly optionService: JoyrideOptionsService) { }\r\n\r\n    debug(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled) {\r\n            console.debug(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n    info(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled) {\r\n            console.info(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n    warn(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled) {\r\n            console.warn(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n    error(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled) {\r\n            console.error(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n}","import { Component, Input, AfterViewInit, ViewEncapsulation, OnInit, OnDestroy, ViewContainerRef, ElementRef, ViewChild, Renderer2, Injector, TemplateRef, Inject } from \"@angular/core\";\r\nimport { JoyrideStep } from \"../../models/joyride-step.class\";\r\nimport { JoyrideStepService, ARROW_SIZE, DISTANCE_FROM_TARGET, IJoyrideStepService } from \"../../services/joyride-step.service\";\r\nimport { JoyrideStepsContainerService } from \"../../services/joyride-steps-container.service\";\r\nimport { EventListenerService } from \"../../services/event-listener.service\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { DocumentService } from \"../../services/document.service\";\r\nimport { JoyrideOptionsService } from \"../../services/joyride-options.service\";\r\nimport { LoggerService } from \"../../services/logger.service\";\r\n\r\nconst STEP_MIN_WIDTH = 200;\r\nconst STEP_MAX_WIDTH = 400;\r\nconst STEP_HEIGHT = 200;\r\nconst ASPECT_RATIO = 1.212;\r\nconst DEFAULT_DISTANCE_FROM_MARGIN_TOP = 2;\r\nconst DEFAULT_DISTANCE_FROM_MARGIN_LEFT = 2;\r\nconst DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM = 5;\r\nconst DEFAULT_DISTANCE_FROM_MARGIN_RIGHT = 5;\r\n\r\n@Component({\r\n    selector: 'joyride-step',\r\n    templateUrl: './joyride-step.component.html',\r\n    styleUrls: ['./joyride-step.component.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class JoyrideStepComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n    stepWidth: number = STEP_MIN_WIDTH;\r\n    stepHeight: number = STEP_HEIGHT;\r\n    leftPosition: number;\r\n    topPosition: number;\r\n    showArrow: boolean = true;\r\n    arrowPosition: string;\r\n    arrowLeftPosition: number;\r\n    arrowTopPosition: number;\r\n    title: string;\r\n    text: string;\r\n    counter: string;\r\n    isCounterVisible: boolean;\r\n    isPrevButtonVisible: boolean;\r\n    themeColor: string;\r\n    customContent: TemplateRef<any>;\r\n    ctx: Object;\r\n\r\n    private arrowSize: number = ARROW_SIZE;\r\n    private stepAbsoluteLeft: number;\r\n    private stepAbsoluteTop: number;\r\n    private targetWidth: number;\r\n    targetHeight: number;\r\n    private targetAbsoluteLeft: number;\r\n    private targetAbsoluteTop: number;\r\n\r\n    private subscriptions: Subscription[] = [];\r\n    joyrideStepService: IJoyrideStepService;\r\n\r\n    private positionAlreadyFixed: boolean;\r\n    private documentHeight: number;\r\n\r\n    @Input() step?: JoyrideStep;\r\n    @ViewChild('stepHolder') stepHolder: ElementRef;\r\n    @ViewChild('stepContainer') stepContainer: ElementRef;\r\n\r\n    constructor(\r\n        private injector: Injector,\r\n        private readonly stepsContainerService: JoyrideStepsContainerService,\r\n        private readonly eventListenerService: EventListenerService,\r\n        private readonly documentService: DocumentService,\r\n        private readonly renderer: Renderer2,\r\n        private readonly logger: LoggerService,\r\n        private readonly optionsService: JoyrideOptionsService\r\n    ) { }\r\n\r\n    \r\n    ngOnInit(): void {\r\n        // Need to Inject here otherwise you will obtain a circular dependency\r\n        this.joyrideStepService = this.injector.get(JoyrideStepService)\r\n        \r\n        this.documentHeight = this.documentService.getDocumentHeight();\r\n        this.subscriptions.push(this.subscribeToResizeEvents());\r\n        this.title = this.step.title;\r\n        this.text = this.step.text;\r\n        this.customContent = this.step.stepContent;\r\n        this.ctx = this.step.stepContentParams;\r\n        this.counter = this.getCounter();\r\n        this.isCounterVisible = this.optionsService.isCounterVisible();\r\n        this.isPrevButtonVisible = this.optionsService.isPrevButtonVisible();\r\n        this.themeColor = this.optionsService.getThemeColor();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.step.stepContent) {\r\n            this.stepWidth = this.stepContainer.nativeElement.clientWidth;\r\n            this.stepHeight = this.stepContainer.nativeElement.clientHeight;\r\n        }\r\n        else {\r\n            this.renderer.setStyle(this.stepContainer.nativeElement, \"max-width\", STEP_MAX_WIDTH + 'px');\r\n            let dimensions = this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth, this.stepContainer.nativeElement.clientHeight, ASPECT_RATIO);\r\n            dimensions = this.adjustDimensions(dimensions.width, dimensions.height);\r\n            this.stepWidth = dimensions.width;\r\n            this.stepHeight = dimensions.height;\r\n            this.renderer.setStyle(this.stepContainer.nativeElement, \"width\", this.stepWidth + 'px');\r\n            this.renderer.setStyle(this.stepContainer.nativeElement, \"height\", this.stepHeight + 'px');\r\n        }\r\n        this.drawStep();\r\n    }\r\n\r\n    private drawStep() {\r\n        let position = this.step.isElementOrAncestorFixed ? 'fixed' : 'absolute';\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, \"position\", position);\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, \"transform\", this.step.transformCssStyle);\r\n        this.targetWidth = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width;\r\n        this.targetHeight = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height;\r\n        this.targetAbsoluteLeft = position === 'fixed' ?\r\n            this.documentService.getElementFixedLeft(this.step.targetViewContainer.element)\r\n            : this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element);\r\n        this.targetAbsoluteTop = position === 'fixed' ?\r\n            this.documentService.getElementFixedTop(this.step.targetViewContainer.element)\r\n            : this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element);\r\n        this.setStepStyle();\r\n    }\r\n\r\n    private getCounter(): string {\r\n        let stepPosition = this.stepsContainerService.getStepPosition(this.step);\r\n        let numberOfSteps = this.stepsContainerService.getNumberOfSteps();\r\n        return stepPosition + '/' + numberOfSteps;\r\n    }\r\n\r\n    prev() {\r\n        this.joyrideStepService.prev()\r\n    }\r\n\r\n    next() {\r\n        this.joyrideStepService.next();\r\n    }\r\n\r\n    close() {\r\n        this.joyrideStepService.close();\r\n    }\r\n\r\n    isFirstStep() {\r\n        return this.joyrideStepService.isFirstStep();\r\n    }\r\n\r\n    isLastStep() {\r\n        return this.joyrideStepService.isLastStep();\r\n    }\r\n\r\n    private setStepStyle() {\r\n        switch (this.step.position) {\r\n            case 'top': {\r\n                this.setStyleTop();\r\n                break;\r\n            }\r\n            case 'bottom': {\r\n                this.setStyleBottom();\r\n                break;\r\n            }\r\n            case 'right': {\r\n                this.setStyleRight();\r\n                break;\r\n            }\r\n            case 'left': {\r\n                this.setStyleLeft();\r\n                break;\r\n            }\r\n            case 'center': {\r\n                this.setStyleCenter();\r\n                break;\r\n            }\r\n            default: {\r\n                this.setStyleBottom();\r\n            }\r\n        }\r\n    }\r\n\r\n    private setStyleTop() {\r\n        this.stepsContainerService.setPosition(this.step, 'top');\r\n        this.topPosition = this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\r\n        this.stepAbsoluteTop = this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\r\n        this.arrowTopPosition = this.stepHeight;\r\n\r\n        this.leftPosition = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.stepAbsoluteLeft = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\r\n        this.adjustLeftPosition();\r\n        this.adjustRightPosition();\r\n        this.arrowPosition = 'bottom';\r\n        this.autofixTopPosition();\r\n    }\r\n\r\n    private setStyleRight() {\r\n        this.stepsContainerService.setPosition(this.step, 'right');\r\n        this.topPosition = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\r\n        this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\r\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\r\n\r\n        this.leftPosition = this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\r\n        this.stepAbsoluteLeft = this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\r\n        this.arrowLeftPosition = - this.arrowSize;\r\n        this.adjustTopPosition();\r\n        this.adjustBottomPosition();\r\n        this.arrowPosition = 'left';\r\n        this.autofixRightPosition();\r\n    }\r\n\r\n    private setStyleBottom() {\r\n        this.stepsContainerService.setPosition(this.step, 'bottom');\r\n        this.topPosition = this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\r\n        this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\r\n        this.arrowTopPosition = -this.arrowSize;\r\n\r\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\r\n        this.leftPosition = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.stepAbsoluteLeft = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.adjustLeftPosition();\r\n        this.adjustRightPosition();\r\n        this.arrowPosition = 'top';\r\n        this.autofixBottomPosition()\r\n    }\r\n\r\n    private setStyleLeft() {\r\n        this.stepsContainerService.setPosition(this.step, 'left');\r\n        this.topPosition = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\r\n        this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\r\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\r\n\r\n        this.leftPosition = this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\r\n        this.stepAbsoluteLeft = this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\r\n        this.arrowLeftPosition = this.stepWidth;\r\n        this.adjustTopPosition();\r\n        this.adjustBottomPosition();\r\n        this.arrowPosition = 'right';\r\n        this.autofixLeftPosition();\r\n    }\r\n\r\n    private setStyleCenter() {\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, \"position\", \"fixed\");\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, \"top\", \"50%\");\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, \"left\", \"50%\");\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, \"transform\", `translate(-${this.stepWidth / 2}px, -${this.stepHeight / 2}px)`);\r\n        this.showArrow = false;\r\n    }\r\n\r\n    private adjustLeftPosition() {\r\n        if (this.leftPosition < 0) {\r\n            this.arrowLeftPosition = this.arrowLeftPosition + this.leftPosition - DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\r\n            this.leftPosition = DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\r\n        }\r\n    }\r\n\r\n    private adjustRightPosition() {\r\n        let currentWindowWidth = document.body.clientWidth;\r\n        if (this.stepAbsoluteLeft + this.stepWidth > currentWindowWidth) {\r\n            let newLeftPos = this.leftPosition - (this.stepAbsoluteLeft + this.stepWidth + DEFAULT_DISTANCE_FROM_MARGIN_RIGHT - currentWindowWidth);\r\n            let deltaLeftPosition = newLeftPos - this.leftPosition;\r\n\r\n            this.leftPosition = newLeftPos;\r\n            this.arrowLeftPosition = this.arrowLeftPosition - deltaLeftPosition;\r\n        }\r\n    }\r\n\r\n    private adjustTopPosition() {\r\n        if (this.stepAbsoluteTop < 0) {\r\n            this.arrowTopPosition = this.arrowTopPosition + this.topPosition - DEFAULT_DISTANCE_FROM_MARGIN_TOP;\r\n            this.topPosition = DEFAULT_DISTANCE_FROM_MARGIN_TOP;\r\n        }\r\n    }\r\n\r\n    private adjustBottomPosition() {\r\n        if (this.stepAbsoluteTop + this.stepHeight > this.documentHeight) {\r\n            let newTopPos = this.topPosition - (this.stepAbsoluteTop + this.stepHeight + DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM - this.documentHeight);\r\n            let deltaTopPosition = newTopPos - this.topPosition;\r\n\r\n            this.topPosition = newTopPos;\r\n            this.arrowTopPosition = this.arrowTopPosition - deltaTopPosition;\r\n        }\r\n    }\r\n\r\n    private autofixTopPosition() {\r\n        if (this.positionAlreadyFixed) {\r\n            this.logger.warn(\"No step positions found for this step. The step will be centered.\");\r\n        } else if (this.targetAbsoluteTop - this.stepHeight - this.arrowSize < 0) {\r\n            this.positionAlreadyFixed = true;\r\n            this.setStyleRight();\r\n        }\r\n    }\r\n\r\n    private autofixRightPosition() {\r\n        if (this.targetAbsoluteLeft + this.targetWidth + this.stepWidth + this.arrowSize > document.body.clientWidth) {\r\n            this.setStyleBottom();\r\n        }\r\n    }\r\n\r\n    private autofixBottomPosition() {\r\n        if (this.targetAbsoluteTop + this.stepHeight + this.arrowSize + this.targetHeight > this.documentHeight) {\r\n            this.setStyleLeft();\r\n        }\r\n    }\r\n\r\n    private autofixLeftPosition() {\r\n        if (this.targetAbsoluteLeft - this.stepWidth - this.arrowSize < 0) {\r\n            this.setStyleTop();\r\n        }\r\n    }\r\n\r\n    private subscribeToResizeEvents(): Subscription {\r\n        return this.eventListenerService.resizeEvent.subscribe(() => {\r\n            this.drawStep();\r\n        });\r\n    }\r\n\r\n    private getDimensionsByAspectRatio(width: number, height: number, aspectRatio: number) {\r\n        let calcHeight = (width + height) / (1 + aspectRatio);\r\n        let calcWidth = calcHeight * aspectRatio;\r\n        return {\r\n            width: calcWidth,\r\n            height: calcHeight\r\n        }\r\n    }\r\n    private adjustDimensions(width: number, height: number) {\r\n        let area = width * height;\r\n        let newWidth = width;\r\n        let newHeight = height;\r\n        if (width > STEP_MAX_WIDTH) {\r\n            newWidth = STEP_MAX_WIDTH;\r\n            newHeight = area / newWidth;\r\n        }\r\n        else if (width < STEP_MIN_WIDTH) {\r\n            newWidth = STEP_MIN_WIDTH;\r\n            newHeight = STEP_MIN_WIDTH / ASPECT_RATIO;\r\n        }\r\n        return {\r\n            width: newWidth,\r\n            height: newHeight\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.subscriptions.forEach((subscription) => {\r\n            subscription.unsubscribe();\r\n        });\r\n    }\r\n\r\n}","import { Injectable, ComponentFactory, ComponentRef, ComponentFactoryResolver, ViewContainerRef, ApplicationRef, Injector, EmbeddedViewRef } from '@angular/core';\r\nimport { JoyrideStepComponent } from \"../components/step/joyride-step.component\";\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\n\r\n@Injectable()\r\nexport class StepDrawerService {\r\n\r\n    mappa: { [key: string]: ComponentRef<JoyrideStepComponent>; } = {};\r\n\r\n    constructor(\r\n        private readonly componentFactoryResolver: ComponentFactoryResolver,\r\n        private appRef: ApplicationRef,\r\n        private injector: Injector\r\n    ) { }\r\n\r\n    draw(step: JoyrideStep) {\r\n        const factory: ComponentFactory<JoyrideStepComponent> = this.componentFactoryResolver.resolveComponentFactory(JoyrideStepComponent);\r\n\r\n        // 1. Create a component reference from the component \r\n        const ref: ComponentRef<JoyrideStepComponent> = this.componentFactoryResolver\r\n            .resolveComponentFactory(JoyrideStepComponent)\r\n            .create(this.injector);\r\n\r\n        // 2. Attach component to the appRef so that it's inside the ng component tree\r\n        this.appRef.attachView(ref.hostView);\r\n\r\n        // 3. Get DOM element from component\r\n        const domElem = (ref.hostView as EmbeddedViewRef<any>)\r\n            .rootNodes[0] as HTMLElement;\r\n\r\n        // 4. Append DOM element to the body\r\n        document.body.appendChild(domElem);\r\n\r\n        const instance: JoyrideStepComponent = ref.instance;\r\n        instance.step = step;\r\n        ref.changeDetectorRef.detectChanges();\r\n        step.stepInstance = instance;\r\n\r\n        this.mappa[step.name] = ref;\r\n\r\n    }\r\n\r\n    remove(step: JoyrideStep) {\r\n        this.appRef.detachView(this.mappa[step.name].hostView);\r\n        this.mappa[step.name].destroy();\r\n    }\r\n\r\n}","import { Injectable } from \"@angular/core\";\r\nimport { JoyrideStep } from \"../models/joyride-step.class\";\r\nimport { JoyrideBackdropService } from \"./joyride-backdrop.service\";\r\nimport { EventListenerService } from \"./event-listener.service\";\r\nimport { JoyrideStepsContainerService } from \"./joyride-steps-container.service\";\r\nimport { DocumentService } from \"./document.service\";\r\nimport { StepDrawerService } from \"./step-drawer.service\";\r\nimport { DomRefService } from \"./dom.service\";\r\nimport { NO_POSITION } from \"../directives/joyride.directive\";\r\nimport { JoyrideOptionsService } from \"./joyride-options.service\";\r\nimport { Router } from '@angular/router';\r\nimport { ReplaySubject, Observable } from \"rxjs\";\r\nimport { JoyrideStepInfo } from \"../models/joyride-step-info.class\";\r\n\r\nconst SCROLLBAR_SIZE = 20;\r\nexport const DISTANCE_FROM_TARGET = 15;\r\nexport const ARROW_SIZE = 10;\r\n\r\nexport interface IJoyrideStepService {\r\n    startTour(): Observable<JoyrideStepInfo>;\r\n    close(): any;\r\n    prev(): any;\r\n    next(): any;\r\n    isFirstStep(): boolean;\r\n    isLastStep(): boolean;\r\n}\r\n\r\n@Injectable()\r\nexport class JoyrideStepService implements IJoyrideStepService {\r\n    private currentStepIndex: number;\r\n    private currentStep: JoyrideStep;\r\n\r\n    private winTopPosition: number = 0;\r\n    private winBottomPosition: number = 0;\r\n    private stepsObserver: ReplaySubject<JoyrideStepInfo> = new ReplaySubject<JoyrideStepInfo>();\r\n\r\n    constructor(\r\n        private readonly backDropService: JoyrideBackdropService,\r\n        private readonly eventListener: EventListenerService,\r\n        private readonly stepsContainerService: JoyrideStepsContainerService,\r\n        private readonly documentService: DocumentService,\r\n        private readonly DOMService: DomRefService,\r\n        private readonly stepDrawerService: StepDrawerService,\r\n        private readonly optionsService: JoyrideOptionsService,\r\n        private readonly router: Router\r\n    ) {\r\n        this.initViewportPositions();\r\n        this.subscribeToScrollEvents();\r\n        this.subscribeToResizeEvents();\r\n    }\r\n\r\n    private initViewportPositions() {\r\n        this.winTopPosition = 0;\r\n        this.winBottomPosition = this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\r\n    }\r\n\r\n    private subscribeToScrollEvents() {\r\n        this.eventListener.startListeningScrollEvents();\r\n        this.eventListener.scrollEvent.subscribe((scroll) => {\r\n            this.winTopPosition = scroll.scrollY;\r\n            this.winBottomPosition = this.winTopPosition + this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\r\n            this.backDropService.redraw(this.currentStep, scroll);\r\n        });\r\n    }\r\n\r\n    private subscribeToResizeEvents() {\r\n        this.eventListener.resizeEvent.subscribe(() => {\r\n            this.backDropService.redrawTarget(this.currentStep);\r\n        });\r\n    }\r\n\r\n    private drawStep(step: JoyrideStep) {\r\n        step.position = step.position === NO_POSITION ? this.optionsService.getStepDefaultPosition() : step.position;\r\n        this.stepDrawerService.draw(step);\r\n    }\r\n\r\n    startTour(): Observable<JoyrideStepInfo> {\r\n        this.stepsObserver = new ReplaySubject<JoyrideStepInfo>();\r\n        this.currentStepIndex = 0;\r\n        this.documentService.setDocumentHeight();\r\n        this.navigateToStepPage();\r\n        this.showStep('NEXT');\r\n        this.eventListener.startListeningResizeEvents();\r\n        this.subscribeToStepsUpdates();\r\n        return this.stepsObserver.asObservable();\r\n    }\r\n\r\n    close() {\r\n        this.removeCurrentStep();\r\n        this.notifyTourIsFinished();\r\n        this.DOMService.getNativeWindow().scrollTo(0, 0);\r\n        this.eventListener.stopListeningResizeEvents();\r\n    }\r\n\r\n    prev() {\r\n        this.removeCurrentStep();\r\n        this.currentStepIndex -= 1;\r\n        this.currentStep.prevCliked.emit();\r\n        this.navigateToStepPage();\r\n        this.showStep('PREV');\r\n    }\r\n\r\n    next() {\r\n        this.removeCurrentStep();\r\n        this.currentStepIndex += 1;\r\n        this.currentStep.nextClicked.emit();\r\n        this.navigateToStepPage();\r\n        this.showStep('NEXT');\r\n    }\r\n\r\n    isFirstStep() {\r\n        return this.currentStepIndex === 0;\r\n    }\r\n\r\n    isLastStep() {\r\n        return this.currentStepIndex === this.stepsContainerService.getNumberOfSteps() - 1;\r\n    }\r\n\r\n    private navigateToStepPage() {\r\n        let stepRoute = this.stepsContainerService.getStepRoute(this.currentStepIndex);\r\n        if (stepRoute) {\r\n            this.router.navigate([stepRoute]);\r\n        }\r\n    }\r\n\r\n    private subscribeToStepsUpdates() {\r\n        this.stepsContainerService.stepHasBeenModified.subscribe((updatedStep) => {\r\n            if (this.currentStep.name === updatedStep.name) {\r\n                this.currentStep = updatedStep;\r\n            }\r\n        });\r\n    }\r\n\r\n    private showStep(action: 'PREV' | 'NEXT') {\r\n        setTimeout(() => {\r\n            this.stepsContainerService.initSteps();\r\n            this.currentStep = this.stepsContainerService.get(this.currentStepIndex);\r\n            this.backDropService.show(this.currentStep);\r\n            this.drawStep(this.currentStep);\r\n            this.scrollIfTargetNotVisible();\r\n            this.notifyStepClicked(action)\r\n        }, 1)\r\n    }\r\n\r\n    private notifyStepClicked(action: 'PREV' | 'NEXT') {\r\n        let stepInfo: JoyrideStepInfo = {\r\n            number: this.currentStepIndex,\r\n            name: this.currentStep.name,\r\n            route: this.currentStep.route,\r\n            actionType: action\r\n        }\r\n        this.stepsObserver.next(stepInfo);\r\n    }\r\n\r\n    private notifyTourIsFinished() {\r\n        this.currentStep.tourDone.emit();\r\n        this.stepsObserver.complete();\r\n    }\r\n\r\n    private removeCurrentStep() {\r\n        this.backDropService.hide();\r\n        this.stepDrawerService.remove(this.currentStep);\r\n    }\r\n\r\n    private scrollIfTargetNotVisible() {\r\n        this.scrollWhenTargetIsHiddenBottom();\r\n        this.scrollWhenTargetIsHiddenTop();\r\n    }\r\n\r\n    private scrollWhenTargetIsHiddenBottom() {\r\n        let totalTargetBottom = this.getTotalTargetBottomPosition();\r\n        if (totalTargetBottom > this.winBottomPosition) {\r\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetBottom - this.winBottomPosition);\r\n        }\r\n    }\r\n\r\n    private scrollWhenTargetIsHiddenTop() {\r\n        let totalTargetTop = this.getTotalTargetTopPosition();\r\n        if (totalTargetTop < this.winTopPosition) {\r\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetTop - this.winTopPosition);\r\n        }\r\n    }\r\n\r\n    private getTotalTargetBottomPosition(): number {\r\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\r\n        if (this.currentStep.position === 'top') {\r\n            return targetAbsoluteTop + this.currentStep.stepInstance.targetHeight;\r\n        } else if (this.currentStep.position === 'bottom') {\r\n            return targetAbsoluteTop + this.currentStep.stepInstance.targetHeight + this.currentStep.stepInstance.stepHeight + ARROW_SIZE + DISTANCE_FROM_TARGET;\r\n        } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\r\n            return Math.max(targetAbsoluteTop + this.currentStep.stepInstance.targetHeight,\r\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 + this.currentStep.stepInstance.stepHeight / 2);\r\n        }\r\n    }\r\n\r\n    private getTotalTargetTopPosition() {\r\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\r\n        if (this.currentStep.position === 'top') {\r\n            return targetAbsoluteTop - (this.currentStep.stepInstance.stepHeight + ARROW_SIZE + DISTANCE_FROM_TARGET);\r\n        } else if (this.currentStep.position === 'bottom') {\r\n            return targetAbsoluteTop;\r\n        } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\r\n            return Math.min(targetAbsoluteTop, targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 - this.currentStep.stepInstance.stepHeight / 2);\r\n        }\r\n    }\r\n\r\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","// typeof any so that it we don't have to cast when comparing a result to the error object\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var errorObject = { e: {} };\n//# sourceMappingURL=errorObject.js.map\n","/** PURE_IMPORTS_START _errorObject PURE_IMPORTS_END */\nimport { errorObject } from './errorObject';\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        return tryCatchTarget.apply(this, arguments);\n    }\n    catch (e) {\n        errorObject.e = e;\n        return errorObject;\n    }\n}\nexport function tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n//# sourceMappingURL=tryCatch.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\n/**\n * The global configuration object for RxJS, used to configure things\n * like what Promise contructor should used to create Promises\n */\nexport var config = {\n    /**\n     * The promise constructor used by default for methods such as\n     * {@link toPromise} and {@link forEach}\n     */\n    Promise: undefined,\n    /**\n     * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n     * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n     * call in a try/catch block. It also enables producer interference, a nasty bug\n     * where a multicast can be broken for all observers by a downstream consumer with\n     * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BY TIME\n     * FOR MIGRATION REASONS.\n     */\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/**\n * Throws an error on another job so that it's picked up by the runtime's\n * uncaught error handling mechanism.\n * @param err the error to throw\n */\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; });\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = Array.isArray || (function (x) { return x && typeof x.length === 'number'; });\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x != null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nvar UnsubscriptionError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(UnsubscriptionError, _super);\n    function UnsubscriptionError(errors) {\n        var _this = _super.call(this, errors ?\n            errors.length + \" errors occurred during unsubscription:\\n  \" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '') || this;\n        _this.errors = errors;\n        _this.name = 'UnsubscriptionError';\n        Object.setPrototypeOf(_this, UnsubscriptionError.prototype);\n        return _this;\n    }\n    return UnsubscriptionError;\n}(Error));\nexport { UnsubscriptionError };\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_tryCatch,_util_errorObject,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { tryCatch } from './util/tryCatch';\nimport { errorObject } from './util/errorObject';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nvar Subscription = /*@__PURE__*/ (function () {\n    /**\n     * @param {function(): void} [unsubscribe] A function describing how to\n     * perform the disposal of resources when the `unsubscribe` method is called.\n     */\n    function Subscription(unsubscribe) {\n        /**\n         * A flag to indicate whether this Subscription has already been unsubscribed.\n         * @type {boolean}\n         */\n        this.closed = false;\n        /** @internal */\n        this._parent = null;\n        /** @internal */\n        this._parents = null;\n        /** @internal */\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    /**\n     * Disposes the resources held by the subscription. May, for instance, cancel\n     * an ongoing Observable execution or cancel any other type of work that\n     * started when the Subscription was created.\n     * @return {void}\n     */\n    Subscription.prototype.unsubscribe = function () {\n        var hasErrors = false;\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parent = _a._parent, _parents = _a._parents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parent = null;\n        this._parents = null;\n        // null out _subscriptions first so any child subscriptions that attempt\n        // to remove themselves from this subscription will noop\n        this._subscriptions = null;\n        var index = -1;\n        var len = _parents ? _parents.length : 0;\n        // if this._parent is null, then so is this._parents, and we\n        // don't have to remove ourselves from any parent subscriptions.\n        while (_parent) {\n            _parent.remove(this);\n            // if this._parents is null or index >= len,\n            // then _parent is set to null, and the loop exits\n            _parent = ++index < len && _parents[index] || null;\n        }\n        if (isFunction(_unsubscribe)) {\n            var trial = tryCatch(_unsubscribe).call(this);\n            if (trial === errorObject) {\n                hasErrors = true;\n                errors = errors || (errorObject.e instanceof UnsubscriptionError ?\n                    flattenUnsubscriptionErrors(errorObject.e.errors) : [errorObject.e]);\n            }\n        }\n        if (isArray(_subscriptions)) {\n            index = -1;\n            len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    var trial = tryCatch(sub.unsubscribe).call(sub);\n                    if (trial === errorObject) {\n                        hasErrors = true;\n                        errors = errors || [];\n                        var err = errorObject.e;\n                        if (err instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(err.errors));\n                        }\n                        else {\n                            errors.push(err);\n                        }\n                    }\n                }\n            }\n        }\n        if (hasErrors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    /**\n     * Adds a tear down to be called during the unsubscribe() of this\n     * Subscription.\n     *\n     * If the tear down being added is a subscription that is already\n     * unsubscribed, is the same reference `add` is being called on, or is\n     * `Subscription.EMPTY`, it will not be added.\n     *\n     * If this subscription is already in an `closed` state, the passed\n     * tear down logic will be executed immediately.\n     *\n     * @param {TeardownLogic} teardown The additional logic to execute on\n     * teardown.\n     * @return {Subscription} Returns the Subscription used or created to be\n     * added to the inner subscriptions list. This Subscription can be used with\n     * `remove()` to remove the passed teardown logic from the inner subscriptions\n     * list.\n     */\n    Subscription.prototype.add = function (teardown) {\n        if (!teardown || (teardown === Subscription.EMPTY)) {\n            return Subscription.EMPTY;\n        }\n        if (teardown === this) {\n            return this;\n        }\n        var subscription = teardown;\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (typeof subscription._addParent !== 'function' /* quack quack */) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default:\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n        }\n        var subscriptions = this._subscriptions || (this._subscriptions = []);\n        subscriptions.push(subscription);\n        subscription._addParent(this);\n        return subscription;\n    };\n    /**\n     * Removes a Subscription from the internal list of subscriptions that will\n     * unsubscribe during the unsubscribe process of this Subscription.\n     * @param {Subscription} subscription The subscription to remove.\n     * @return {void}\n     */\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    /** @internal */\n    Subscription.prototype._addParent = function (parent) {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        if (!_parent || _parent === parent) {\n            // If we don't have a parent, or the new parent is the same as the\n            // current parent, then set this._parent to the new parent.\n            this._parent = parent;\n        }\n        else if (!_parents) {\n            // If there's already one parent, but not multiple, allocate an Array to\n            // store the rest of the parent Subscriptions.\n            this._parents = [parent];\n        }\n        else if (_parents.indexOf(parent) === -1) {\n            // Only add the new parent to the _parents list if it's not already there.\n            _parents.push(parent);\n        }\n    };\n    /** @nocollapse */\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = (typeof Symbol === 'function' && typeof Symbol.for === 'function')\n    ? /*@__PURE__*/ Symbol.for('rxSubscriber')\n    : '@@rxSubscriber';\n/**\n * @deprecated use rxSubscriber instead\n */\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    /**\n     * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n     * defined Observer or a `next` callback function.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     */\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        /** @internal */ _this.syncErrorValue = null;\n        /** @internal */ _this.syncErrorThrown = false;\n        /** @internal */ _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    // HACK(benlesh): For situations where Node has multiple copies of rxjs in\n                    // node_modules, we cannot rely on `instanceof` checks\n                    if (isTrustedSubscriber(destinationOrNext)) {\n                        var trustedSubscriber = destinationOrNext[rxSubscriberSymbol]();\n                        _this.syncErrorThrowable = trustedSubscriber.syncErrorThrowable;\n                        _this.destination = trustedSubscriber;\n                        trustedSubscriber.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    /**\n     * A static factory for a Subscriber, given a (potentially partial) definition\n     * of an Observer.\n     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n     * Observer represented by the given arguments.\n     * @nocollapse\n     */\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `next` from\n     * the Observable, with a value. The Observable may call this method 0 or more\n     * times.\n     * @param {T} [value] The `next` value.\n     * @return {void}\n     */\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `error` from\n     * the Observable, with an attached {@link Error}. Notifies the Observer that\n     * the Observable has experienced an error condition.\n     * @param {any} [err] The `error` exception.\n     * @return {void}\n     */\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive a valueless notification of type\n     * `complete` from the Observable. Notifies the Observer that the Observable\n     * has finished sending push-based notifications.\n     * @return {void}\n     */\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        this._parent = null;\n        this._parents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parent = _parent;\n        this._parents = _parents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nfunction isTrustedSubscriber(obj) {\n    return obj instanceof Subscriber || ('syncErrorThrowable' in obj && obj[rxSubscriberSymbol]);\n}\n//# sourceMappingURL=Subscriber.js.map\n","/** Symbol.observable or a string \"@@observable\". Used for interop */\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = typeof Symbol === 'function' && Symbol.observable || '@@observable';\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when an element was queried at a certain index of an\n * Observable, but no such index or position exists in that sequence.\n *\n * @see {@link elementAt}\n * @see {@link take}\n * @see {@link takeLast}\n *\n * @class ArgumentOutOfRangeError\n */\nvar ArgumentOutOfRangeError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ArgumentOutOfRangeError, _super);\n    function ArgumentOutOfRangeError() {\n        var _this = _super.call(this, 'argument out of range') || this;\n        _this.name = 'ArgumentOutOfRangeError';\n        Object.setPrototypeOf(_this, ArgumentOutOfRangeError.prototype);\n        return _this;\n    }\n    return ArgumentOutOfRangeError;\n}(Error));\nexport { ArgumentOutOfRangeError };\n//# sourceMappingURL=ArgumentOutOfRangeError.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when an Observable or a sequence was queried but has no\n * elements.\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link single}\n *\n * @class EmptyError\n */\nvar EmptyError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(EmptyError, _super);\n    function EmptyError() {\n        var _this = _super.call(this, 'no elements in sequence') || this;\n        _this.name = 'EmptyError';\n        Object.setPrototypeOf(_this, EmptyError.prototype);\n        return _this;\n    }\n    return EmptyError;\n}(Error));\nexport { EmptyError };\n//# sourceMappingURL=EmptyError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\n/**\n * Returns an Observable that mirrors the source Observable, but will call a specified function when\n * the source terminates on complete or error.\n * @param {function} callback Function to be called when source terminates.\n * @return {Observable} An Observable that mirrors the source, but will call the specified function on termination.\n * @method finally\n * @owner Observable\n */\nexport function finalize(callback) {\n    return function (source) { return source.lift(new FinallyOperator(callback)); };\n}\nvar FinallyOperator = /*@__PURE__*/ (function () {\n    function FinallyOperator(callback) {\n        this.callback = callback;\n    }\n    FinallyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FinallySubscriber(subscriber, this.callback));\n    };\n    return FinallyOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FinallySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FinallySubscriber, _super);\n    function FinallySubscriber(destination, callback) {\n        var _this = _super.call(this, destination) || this;\n        _this.add(new Subscription(callback));\n        return _this;\n    }\n    return FinallySubscriber;\n}(Subscriber));\n//# sourceMappingURL=finalize.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nvar ObjectUnsubscribedError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ObjectUnsubscribedError, _super);\n    function ObjectUnsubscribedError() {\n        var _this = _super.call(this, 'object unsubscribed') || this;\n        _this.name = 'ObjectUnsubscribedError';\n        Object.setPrototypeOf(_this, ObjectUnsubscribedError.prototype);\n        return _this;\n    }\n    return ObjectUnsubscribedError;\n}(Error));\nexport { ObjectUnsubscribedError };\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when duetime elapses.\n *\n * @see {@link timeout}\n *\n * @class TimeoutError\n */\nvar TimeoutError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TimeoutError, _super);\n    function TimeoutError() {\n        var _this = _super.call(this, 'Timeout has occurred') || this;\n        _this.name = 'TimeoutError';\n        Object.setPrototypeOf(_this, TimeoutError.prototype);\n        return _this;\n    }\n    return TimeoutError;\n}(Error));\nexport { TimeoutError };\n//# sourceMappingURL=TimeoutError.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_Subscription,_util_tryCatch,_util_errorObject,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from '../Subject';\nimport { Subscription } from '../Subscription';\nimport { tryCatch } from '../util/tryCatch';\nimport { errorObject } from '../util/errorObject';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\n/**\n * Branch out the source Observable values as a nested Observable starting from\n * an emission from `openings` and ending when the output of `closingSelector`\n * emits.\n *\n * <span class=\"informal\">It's like {@link bufferToggle}, but emits a nested\n * Observable instead of an array.</span>\n *\n * <img src=\"./img/windowToggle.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits windows that contain those items\n * emitted by the source Observable between the time when the `openings`\n * Observable emits an item and when the Observable returned by\n * `closingSelector` emits an item.\n *\n * @example <caption>Every other second, emit the click events from the next 500ms</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var openings = Rx.Observable.interval(1000);\n * var result = clicks.windowToggle(openings, i =>\n *   i % 2 ? Rx.Observable.interval(500) : Rx.Observable.empty()\n * ).mergeAll();\n * result.subscribe(x => console.log(x));\n *\n * @see {@link window}\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowWhen}\n * @see {@link bufferToggle}\n *\n * @param {Observable<O>} openings An observable of notifications to start new\n * windows.\n * @param {function(value: O): Observable} closingSelector A function that takes\n * the value emitted by the `openings` observable and returns an Observable,\n * which, when it emits (either `next` or `complete`), signals that the\n * associated window should complete.\n * @return {Observable<Observable<T>>} An observable of windows, which in turn\n * are Observables.\n * @method windowToggle\n * @owner Observable\n */\nexport function windowToggle(openings, closingSelector) {\n    return function (source) { return source.lift(new WindowToggleOperator(openings, closingSelector)); };\n}\nvar WindowToggleOperator = /*@__PURE__*/ (function () {\n    function WindowToggleOperator(openings, closingSelector) {\n        this.openings = openings;\n        this.closingSelector = closingSelector;\n    }\n    WindowToggleOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new WindowToggleSubscriber(subscriber, this.openings, this.closingSelector));\n    };\n    return WindowToggleOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowToggleSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(WindowToggleSubscriber, _super);\n    function WindowToggleSubscriber(destination, openings, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.openings = openings;\n        _this.closingSelector = closingSelector;\n        _this.contexts = [];\n        _this.add(_this.openSubscription = subscribeToResult(_this, openings, openings));\n        return _this;\n    }\n    WindowToggleSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        if (contexts) {\n            var len = contexts.length;\n            for (var i = 0; i < len; i++) {\n                contexts[i].window.next(value);\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype._error = function (err) {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context_1 = contexts[index];\n                context_1.window.error(err);\n                context_1.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._error.call(this, err);\n    };\n    WindowToggleSubscriber.prototype._complete = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context_2 = contexts[index];\n                context_2.window.complete();\n                context_2.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._complete.call(this);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    WindowToggleSubscriber.prototype._unsubscribe = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context_3 = contexts[index];\n                context_3.window.unsubscribe();\n                context_3.subscription.unsubscribe();\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (outerValue === this.openings) {\n            var closingSelector = this.closingSelector;\n            var closingNotifier = tryCatch(closingSelector)(innerValue);\n            if (closingNotifier === errorObject) {\n                return this.error(errorObject.e);\n            }\n            else {\n                var window_1 = new Subject();\n                var subscription = new Subscription();\n                var context_4 = { window: window_1, subscription: subscription };\n                this.contexts.push(context_4);\n                var innerSubscription = subscribeToResult(this, closingNotifier, context_4);\n                if (innerSubscription.closed) {\n                    this.closeWindow(this.contexts.length - 1);\n                }\n                else {\n                    innerSubscription.context = context_4;\n                    subscription.add(innerSubscription);\n                }\n                this.destination.next(window_1);\n            }\n        }\n        else {\n            this.closeWindow(this.contexts.indexOf(outerValue));\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyError = function (err) {\n        this.error(err);\n    };\n    WindowToggleSubscriber.prototype.notifyComplete = function (inner) {\n        if (inner !== this.openSubscription) {\n            this.closeWindow(this.contexts.indexOf(inner.context));\n        }\n    };\n    WindowToggleSubscriber.prototype.closeWindow = function (index) {\n        if (index === -1) {\n            return;\n        }\n        var contexts = this.contexts;\n        var context = contexts[index];\n        var window = context.window, subscription = context.subscription;\n        contexts.splice(index, 1);\n        window.complete();\n        subscription.unsubscribe();\n    };\n    return WindowToggleSubscriber;\n}(OuterSubscriber));\n//# sourceMappingURL=windowToggle.js.map\n","export class JoyrideStepInfo {\r\n    number: number;\r\n    name: string;\r\n    route: string;\r\n    actionType: 'NEXT' | 'PREV';\r\n}","import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\r\nimport { JoyrideStepService } from \"./joyride-step.service\";\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { JoyrideOptions } from '../models/joyride-options.class';\r\nimport { Observable, of } from 'rxjs';\r\nimport { finalize } from \"rxjs/operators\";\r\nimport { JoyrideStepInfo } from '../models/joyride-step-info.class';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\n@Injectable()\r\nexport class JoyrideService {\r\n\r\n    private tourInProgress: boolean = false;\r\n    private tour$: Observable<JoyrideStepInfo>;\r\n\r\n    constructor(\r\n        @Inject(PLATFORM_ID) private platformId: Object,\r\n        private readonly stepService: JoyrideStepService,\r\n        private readonly optionsService: JoyrideOptionsService\r\n    ) { }\r\n\r\n    startTour(options?: JoyrideOptions): Observable<JoyrideStepInfo> {\r\n        if (!isPlatformBrowser(this.platformId)) {\r\n            return of(new JoyrideStepInfo());\r\n        }\r\n        if (!this.tourInProgress) {\r\n            this.tourInProgress = true;\r\n            if (options) {\r\n                this.optionsService.setOptions(options);\r\n            }\r\n            this.tour$ = this.stepService.startTour().pipe(\r\n                finalize(() => this.tourInProgress = false));\r\n            this.tour$.subscribe();\r\n        }\r\n        return this.tour$;\r\n    }\r\n\r\n    isTourInProgress(): boolean {\r\n        return this.tourInProgress;\r\n    }\r\n\r\n}","import { Component, Input, EventEmitter, Output } from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: 'joyride-button',\r\n    templateUrl: './button.component.html',\r\n    styleUrls: ['./button.component.scss']\r\n})\r\nexport class JoyrideButtonComponent {\r\n    hover: boolean;\r\n    \r\n    @Input() \r\n    color: string;\r\n    \r\n    @Output()\r\n    clicked: EventEmitter<any> = new EventEmitter();\r\n\r\n    onClick() {\r\n        this.clicked.emit();\r\n    }\r\n}","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'joy-close-button',\r\n    template: `<svg viewBox=\"0 0 25 25\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <line x1=\"1\" y1=\"24\" \r\n                    x2=\"24\" y2=\"1\" \r\n                    stroke=\"black\" \r\n                    stroke-width=\"3\"/>\r\n                <line x1=\"1\" y1=\"1\" \r\n                    x2=\"24\" y2=\"24\" \r\n                    stroke=\"black\" \r\n                    stroke-width=\"3\"/>\r\n            </svg>`\r\n})\r\n\r\nexport class JoyrideCloseButtonComponent { }","\r\nimport { Component, Input, ViewEncapsulation } from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: 'joyride-arrow',\r\n    templateUrl: './arrow.component.html',\r\n    styleUrls: ['./arrow.component.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class JoyrideArrowComponent {\r\n    @Input()\r\n    position: string = 'top';\r\n}","import { NgModule, ModuleWithProviders } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { JoyrideDirective } from './directives/joyride.directive';\r\nimport { JoyrideService } from './services/joyride.service';\r\nimport { JoyrideStepComponent } from \"./components/step/joyride-step.component\";\r\nimport { JoyrideButtonComponent } from \"./components/button/button.component\";\r\nimport { JoyrideCloseButtonComponent } from \"./components/close-button/close-button.component\";\r\nimport { JoyrideStepService } from \"./services/joyride-step.service\";\r\nimport { JoyrideBackdropService } from \"./services/joyride-backdrop.service\";\r\nimport { JoyrideArrowComponent } from \"./components/arrow/arrow.component\";\r\nimport { EventListenerService } from \"./services/event-listener.service\";\r\nimport { JoyrideStepsContainerService } from \"./services/joyride-steps-container.service\";\r\nimport { DocumentService } from \"./services/document.service\";\r\nimport { JoyrideOptionsService } from './services/joyride-options.service';\r\nimport { StepDrawerService } from './services/step-drawer.service';\r\nimport { DomRefService } from './services/dom.service';\r\nimport { LoggerService } from './services/logger.service';\r\nimport { RouterModule } from \"@angular/router\";\r\n\r\nexport const routerModuleForChild: ModuleWithProviders = RouterModule.forChild([]);\r\n\r\n@NgModule({\r\n    imports: [CommonModule, routerModuleForChild],\r\n    declarations: [\r\n        JoyrideDirective,\r\n        JoyrideStepComponent,\r\n        JoyrideArrowComponent,\r\n        JoyrideButtonComponent,\r\n        JoyrideCloseButtonComponent\r\n    ],\r\n    entryComponents: [JoyrideStepComponent],\r\n    exports: [\r\n        JoyrideDirective\r\n    ]\r\n})\r\nexport class JoyrideModule {\r\n    static forRoot(): ModuleWithProviders {\r\n        return {\r\n            ngModule: JoyrideModule,\r\n            providers: [\r\n                JoyrideService,\r\n                JoyrideStepService,\r\n                JoyrideStepsContainerService,\r\n                JoyrideBackdropService,\r\n                EventListenerService,\r\n                DocumentService,\r\n                JoyrideOptionsService,\r\n                StepDrawerService,\r\n                DomRefService,\r\n                LoggerService\r\n            ]\r\n        }\r\n    }\r\n    static forChild(): ModuleWithProviders {\r\n        return {\r\n            ngModule: JoyrideModule,\r\n            providers: []\r\n        }\r\n    }\r\n}\r\n"],"names":["THEME_COLOR","STEP_DEFAULT_POSITION","this","JoyrideOptionsService","options","stepsOrder","steps","stepDefaultPosition","logsEnabled","showCounter","showPrevButton","themeColor","hexToRgb","hex","replace","m","r","g","b","result","exec","parseInt","Injectable","stepOptions","Subject","stepsOriginal","JoyrideStepsContainerService","index","stepID","getStepsOrder","includes","split","step","getStepIndex","stepToAdd","filter","name","length","stepIndexToReplace","findIndex","push","position","stepHasBeenModified","next","forEach","_this","sortSteps","orderedSteps","find","getStepName","s","route","__extends","Error","platformId","body","documentElement","document","fakeDocument","DomRefService","isPlatformBrowser","window","fakeWindow","__param","Inject","PLATFORM_ID","Object","NO_POSITION","joyrideStepsContainer","viewContainerRef","domService","router","EventEmitter","windowRef","getNativeWindow","JoyrideDirective","JoyrideStep","stepPosition","targetViewContainer","text","title","stepContent","stepContentParams","nextClicked","prevCliked","prev","tourDone","done","JoyrideError","url","substr","transformCssStyle","getComputedStyle","element","nativeElement","transform","isElementOrAncestorFixed","isElementFixed","isAncestorsFixed","parentElement","addStep","nodeName","__decorate","Input","TemplateRef","Output","Directive","selector","ViewContainerRef","Router","DOMService","setDocumentHeight","DocumentService","elementRef","getBoundingClientRect","top","left","scrollOffsets","getScrollOffsets","y","x","right","documentHeight","calculateDocumentHeight","doc","getNativeDocument","Math","max","scrollHeight","offsetHeight","clientHeight","w","pageXOffset","pageYOffset","d","compatMode","scrollLeft","scrollTop","documentService","optionsService","rendererFactory","setRenderer","JoyrideBackdropService","renderer","createRenderer","targetAbsoluteTop","getTargetTotalTop","targetAbsoluteLeft","getTargetTotalLeft","backdropContainer","createElement","addClass","setStyle","appendChild","backdropContent","backdropTop","lastYScroll","getBackdropColor","backdropMiddleContainer","backdropMiddleContent","leftBackdrop","lastXScroll","targetBackdrop","offsetWidth","rightBackdrop","backdropBottom","removeBackdrop","undefined","handleVerticalScroll","handleHorizontalScroll","targetVC","getElementFixedTop","getElementAbsoluteTop","getElementFixedLeft","getElementAbsoluteLeft","scroll","scrollY","scrollX","newBackdropLeftWidth","handleTargetPartialWidth","visibleTargetWidth","newBackdropTopHeight","handleTargetPartialHeight","visibleTargetHeight","removeChild","RendererFactory2","EventListenerService","scrollUnlisten","listen","evt","scrollEvent","resizeUnlisten","resizeEvent","JOYRIDE","optionService","LoggerService","message","data","areLogsEnabled","console","debug","info","warn","error","STEP_MIN_WIDTH","STEP_HEIGHT","injector","stepsContainerService","eventListenerService","logger","ARROW_SIZE","JoyrideStepComponent","joyrideStepService","get","JoyrideStepService","getDocumentHeight","subscriptions","subscribeToResizeEvents","customContent","ctx","counter","getCounter","isCounterVisible","isPrevButtonVisible","getThemeColor","stepWidth","stepContainer","clientWidth","stepHeight","STEP_MAX_WIDTH","dimensions","getDimensionsByAspectRatio","adjustDimensions","width","height","drawStep","stepHolder","targetWidth","targetHeight","setStepStyle","getStepPosition","getNumberOfSteps","close","isFirstStep","isLastStep","setStyleTop","setStyleBottom","setStyleRight","setStyleLeft","setStyleCenter","setPosition","topPosition","DISTANCE_FROM_TARGET","stepAbsoluteTop","arrowTopPosition","leftPosition","stepAbsoluteLeft","arrowLeftPosition","arrowSize","adjustLeftPosition","adjustRightPosition","arrowPosition","autofixTopPosition","adjustTopPosition","adjustBottomPosition","autofixRightPosition","autofixBottomPosition","autofixLeftPosition","showArrow","currentWindowWidth","newLeftPos","deltaLeftPosition","newTopPos","deltaTopPosition","positionAlreadyFixed","subscribe","aspectRatio","calcHeight","newWidth","newHeight","subscription","unsubscribe","ViewChild","ElementRef","Injector","Renderer2","componentFactoryResolver","appRef","StepDrawerService","resolveComponentFactory","ref","create","attachView","hostView","domElem","rootNodes","instance","changeDetectorRef","detectChanges","stepInstance","mappa","detachView","destroy","ComponentFactoryResolver","ApplicationRef","backDropService","eventListener","stepDrawerService","ReplaySubject","initViewportPositions","subscribeToScrollEvents","winTopPosition","winBottomPosition","innerHeight","startListeningScrollEvents","redraw","currentStep","redrawTarget","getStepDefaultPosition","draw","stepsObserver","currentStepIndex","navigateToStepPage","showStep","startListeningResizeEvents","subscribeToStepsUpdates","asObservable","removeCurrentStep","notifyTourIsFinished","scrollTo","stopListeningResizeEvents","emit","stepRoute","getStepRoute","navigate","updatedStep","action","setTimeout","initSteps","show","scrollIfTargetNotVisible","notifyStepClicked","stepInfo","number","actionType","complete","hide","remove","scrollWhenTargetIsHiddenBottom","scrollWhenTargetIsHiddenTop","totalTargetBottom","getTotalTargetBottomPosition","scrollBy","totalTargetTop","getTotalTargetTopPosition","min","extendStatics","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","tryCatchTarget","errorObject","e","tryCatcher","apply","arguments","tryCatch","fn","isFunction","_enable_super_gross_mode_that_will_cause_bad_things","config","Promise","useDeprecatedSynchronousErrorHandling","value","stack","hostReportError","err","empty","closed","isArray","isObject","UnsubscriptionError","_super","errors","call","map","i","toString","join","tslib_1.__extends","Subscription","_parent","_parents","_subscriptions","_unsubscribe","hasErrors","len","flattenUnsubscriptionErrors","sub","concat","add","teardown","EMPTY","_addParent","tmp","subscriptionIndex","indexOf","splice","parent","reduce","errs","rxSubscriber","Symbol","for","Subscriber","destinationOrNext","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","emptyObserver","isTrustedSubscriber","trustedSubscriber","rxSubscriberSymbol","SafeSubscriber","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parentSubscriber","observerOrNext","context","bind","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","obj","observable","FinallyOperator","callback","source","FinallySubscriber","stepService","JoyrideService","tourInProgress","setOptions","tour$","startTour","pipe","lift","of","JoyrideStepInfo","JoyrideButtonComponent","clicked","JoyrideCloseButtonComponent","Component","template","JoyrideArrowComponent","routerModuleForChild","RouterModule","forChild","JoyrideModule","ngModule","JoyrideModule_1","providers","NgModule","imports","CommonModule","declarations","entryComponents","exports"],"mappings":"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"}